// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model admin {
  id        Int      @id @default(autoincrement())
  user      String
  password  String
  fullname  String
  lastLogin DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model room {
  id          Int           @id @default(autoincrement())
  name        String //ชื่อห้องพัก
  roomType    String //ประเภทห้องพัก
  price       Int //ราคาห้องพัก
  isAvailable Boolean       @default(true) //สถานะห้องพัก
  imageUrl    String? //รูปภาพห้องพัก
  reservation reservation[]
}

model reservation {
  id              String       @id @default(cuid())
  reservationDate DateTime // วันที่ทำการจอง
  roomId          Int // ห้องที่จอง
  checkInDate     DateTime? // วันที่เข้าพัก
  checkOutDate    DateTime? // วันที่ออก
  customerId      String //รหัสลูกค้า
  paymentType     PAYMENT_TYPE // ประเภทการชำระเงิน
  isCheckedIn     Boolean      @default(false) // สถานะการเข้าพัก
  isCanceled      Boolean      @default(false) // สถานะการยกเลิกการจอง
  isPaymentDone   Boolean      @default(false) //จ่ายเงินสำเร็จ
  bookingDate     DateTime     @default(now()) //วันที่ทำรายการ
  Customer        customer     @relation(fields: [customerId], references: [id])
  Room            room         @relation(fields: [roomId], references: [id])
  paymentTime     DateTime? // วันที่ทำการจ่ายเงิน
}

model customer {
  id          String        @id @default(cuid())
  name        String //ชื่อลูกค้า
  phone       String //เบอร์โทรศัพท์
  lineId      String // Line Unique Id สำหรับส่งการแจ้งเตือนหาลูกค้า
  reservation reservation[]
}

enum PAYMENT_TYPE {
  PROMTPAY
  CASH
}
